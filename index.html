<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Pointillate</title>
    <meta charset="utf-8">
    <meta name="author" content="Will Koeppen">
    <meta name="description"
      content="Transform your image or video into pointillated art.">
    <meta name="keywords"
      content="data visualization, art, animation">
    <meta name="viewport" id="viewport"
      content="width=device-width, initial-scale=1">
    <meta property="og:site_name" content="Will Koeppen">
    <meta property="og:title"
      content="Pointillate: An Art and Animation Sandbox">
    <meta property="og:description"
      content="Transform your image or video into pointillated art.">
    <meta property="og:url" content="https://pointillate.com">
    <meta property="og:type" content="article">
    <meta property="og:image" content="cover.jpg">
    <meta property="og:image:width" content="600">
    <meta property="og:image:height" content="400">
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico">
    <script type="module" src="/src/bootstrap.js"></script>
    <link rel="stylesheet" href="/src/styles.css" />

    <!-- Google tag (gtag.js) -->
    <script async
      src="https://www.googletagmanager.com/gtag/js?id=G-N2Z5GQXW17"></script>
    <script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-N2Z5GQXW17');
</script>
  </head>
  <body>
    <div id="app" class="loading">
      <div id="titlePane">
        <h1 class="title">POINTILLATE</h1>
      </div>
      <div id="loader" class="loader"></div>

      <div id="canvasStage">
        <div id="canvasVisual">
          <canvas id="canvas"></canvas>
        </div>
      </div>

      <div id="controlPane">
        <div id="controlDock">

          <wa-button id="infoButton" size="small" appearance="filled"
            aria-label="About">
            <wa-icon name="info"></wa-icon>
          </wa-button>

          <wa-button id="optionsButton" size="small" appearance="filled"
            aria-label="Edit options">
            <wa-icon name="sliders"></wa-icon>
          </wa-button>

          <wa-button id="uploadButton" size="small" appearance="filled"
            aria-label="Choose file">
            <wa-icon name="camera"></wa-icon>
          </wa-button>

          <wa-button appearance="filled" id="resetButton"
            size="small" aria-label="Reset"><wa-icon
              name="arrows-rotate"></wa-icon></wa-button>

          <wa-button id="runButton" size="small" appearance="filled"
            aria-label="Play/Pause">
            <wa-icon id="runIcon" name="play"></wa-icon>
          </wa-button>

        </div>

        <div id="controlCarousel">
          <div class="carouselPad">

            <div class="controlTrack">

              <div class="controlCard pickerWidth">
                <div class="colorPickers">
                  <wa-color-picker id="backgroundColorBtn" label="Canvas"
                    placement="left" hoist size="small"
                    swatches="#fff; #000"></wa-color-picker>
                  <wa-color-picker id="pointColorBtn" label="Seeds"
                    size="small" swatches="#000; #fff"></wa-color-picker>
                  <wa-color-picker id="cellColorBtn" label="Cells"
                    size="small" swatches="#000; #fff"></wa-color-picker>
                </div>
              </div>

              <div class="controlCard showToggles" id="cardToStart">
                <div class="togglesGrid">
                  <wa-button appearance="filled" id="seedToggle"
                    class="leftToggle">Seeds</wa-button>
                  <wa-button appearance="filled" id="colorToggle"
                    class="rightToggle">Color</wa-button>
                  <wa-button appearance="filled" id="cellToggle"
                    class="leftToggle">Cells</wa-button>
                  <wa-button appearance="filled" id="fillToggle"
                    class="rightToggle">Fill</wa-button>
                </div>
              </div>

              <div class="controlCard sliderWidth">
                <wa-slider with-tooltip id="numPointsSlider" label="Seed Count"
                  min="1000" max="30000" step="1000"></wa-slider>
              </div>

              <div class="controlCard">
                <wa-select id="seedSelect" size="medium" label="Start from">
                  <wa-option value="dark" icon-placement="start"
                    label="Dark Areas">Dark Areas</wa-option>
                  <wa-option value="light" icon-placement="start"
                    label="Light Areas">Light Areas</wa-option>
                  <wa-option value="none" icon-placement="start"
                    label="All Over">All Over</wa-option>
                </wa-select>
              </div>

              <div class="controlCard">
                <wa-select id="relaxSelect" size="medium" label="Gravitate to">
                  <wa-option value="dark" label="Dark Areas">Dark
                    Areas</wa-option>
                  <wa-option value="light" label="Light Areas">Light
                    Areas</wa-option>
                </wa-select>
              </div>

              <div class="controlCard">
                <wa-select id="sizeSelect" size="medium" label="Size by">
                  <wa-option value="dark" label="Darkness">Darkness</wa-option>
                  <wa-option value="light" label="Lightness">Lightness</wa-option>
                  <wa-option value="none" label="Nothing">Nothing</wa-option>
                </wa-select>
              </div>
              <div class="controlCard sliderWidth">
                <wa-slider range with-tooltip id="radiusRange" label="Seed Size"
                  min="0" max="20" step="1"></wa-slider>
                <wa-slider with-tooltip id="radiusSlider" label="Seed Size"
                  min="0" max="20" step="1" style="display:none;"></wa-slider>
              </div>

              <div class="controlCard sliderWidth">
                <wa-slider with-tooltip id="speedSlider" label="Speed" min="0"
                  max="1" step="0.01"></wa-slider>
              </div>

              <div class="controlCard saveButtonCard"
                style="position:relative;">
                <div class="cardCenter">
                  <wa-dropdown id="saveDropdown" placement="top-middle">
                    <wa-button size="large" slot="trigger"
                      appearance="filled"><wa-icon
                        name="download"></wa-icon></wa-button>
                    <wa-dropdown-item value="png">PNG</wa-dropdown-item>
                    <wa-dropdown-item value="json">JSON</wa-dropdown-item>
                  </wa-dropdown>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="infoOverlay" class="info-overlay" hidden>
      <div class="info-panel-outer">
        <div class="info-panel-inner">
          <wa-button id="closeInfo" size="medium"
            aria-label="Close">
            <wa-icon name="close"></wa-icon>
          </wa-button>
          <h1 id="pointillate">Pointillate</h1>
          <p>By <a href="http://www.willkoeppen.com/datavis">Will
              Koeppen</a></p>
          <p>This app uses a reference image to seed a canvas using randomized
            exclusion sampling. Seeds are iteratively moved to new positions
            using Lloyd&#39;s algorithm modified by a density function based on
            the reference. For more information, see <a
              href="https://www.willkoeppen.com/datavis/pointillate/">Pointillate:
              An Art and Animation Sandbox</a>.</p>
          <h3 id="tips">Tips</h3>
          <ul>
            <li>Edit your photo and/or video before adding it as a reference
            </li>
            <li>Images with a high-contrast subject work well</li>
            <li>Images with transparency are composited against black or white</li>
            <li>The process is non-deterministic, so your animation will be
              different every time</li>
            <li><a
              href="https://pointillate.com">Reload the page</a> to see other examples</li>
            <li>Go your own way</li>
          </ul>
          <h3 id="acknowledgements">Acknowledgements</h3>
          <p>This app uses methods described in <a
              href="https://kops.uni-konstanz.de/server/api/core/bitstreams/357c2128-47cb-44bf-ac9d-734cdf9012a6/content">Deussen
              et al. (2000)</a> and <a
              href="https://www.cs.ubc.ca/labs/imager/tr/2002/secord2002b/secord.2002b.pdf">Secord
              (2002)</a>. Daniel Shiffman&#39;s <a
              href="https://thecodingtrain.com/challenges/181-image-stippling">Coding
              Train Challenge #181</a> was an excellent resource, and <a
              href="https://github.com/smallwhale1/voronoi-stippling/tree/main">Sophie
              Zhang</a>&#39;s response to the challenge was an inspiring seed
            for this iteration.</p>
        </div>
      </div>
    </div>

    <div class="behindTheVeil">
      <video id="video" playsinline muted></video>
      <input
        type="file"
        aria-label="Upload image or video"
        id="mediaUploadDialog"
        accept="image/*,video/*,.mp4,.mov,.webm"
        tabindex="-1" />
    </div>

  </body>
</html>